{{ define "main" }}
{{ $path := replace .Page.Path "index.md" (.Page.Title | lower) }}
{{ $language := (or .Params.language "") }}
<header>
    <h1>{{ .Title }}</h1>
</header>

{{ .Content }}

{{ printf "```%s\n%s\n```" $language (trim (readFile $path) "\n") | markdownify }}
{{ end }}
